# TODO リスト（優先度: 高）

最終更新: 2025-10-24

## 🔴 優先度: 高

### 1. Multi-RAGシステムの実装

**目的**: 社内ドキュメントやコードベースを活用した高精度な情報検索と仕様書生成

**実装内容**:
- [ ] Qdrant連携コードの実装
  - ベクトルDBクライアントの実装
  - コレクション管理
- [ ] ミーティングインデックス化機能
  - テキストドキュメントの埋め込み生成
  - 画像の埋め込み生成
  - メタデータ管理
- [ ] マルチモーダル検索エンドポイント
  - テキスト検索
  - 画像検索
  - ハイブリッド検索
- [ ] RAGベース仕様書生成強化
  - 関連ドキュメントの自動検索
  - コンテキスト統合
  - プロンプト最適化

**メリット**:
- 📚 社内ドキュメントの検索
- 💻 コードベース統合
- 🔍 マルチモーダル検索（テキスト+画像）
- 🧠 コンテキストを活用した高精度な仕様書生成

**備考**: インフラ（Qdrant）は既に準備済み、GPU不要でコストゼロ

---

### 2. WhisperX/pyannote再有効化

**目的**: 高精度な音声文字起こしと話者分離の実装

**実装内容**:
- [ ] Modal GPUサーバーでWhisperX有効化
  - modal_app.pyの修正
  - WhisperXモデルのロード
  - エンドポイント実装
- [ ] pyannote.audio統合
  - 話者分離パイプラインの実装
  - WhisperXとの統合
- [ ] タイムスタンプ連携
  - 画像とテキストのタイムスタンプマッピング
  - セッションデータ統合
- [ ] GPU設定の最適化
  - コールドスタート時間の最適化
  - バッチ処理の最適化

**メリット**:
- 🎤 高精度な音声文字起こし
- 👥 話者分離（誰が話したか識別）
- ⏱️ 画像とテキストのタイムスタンプ連携

**備考**: コスト削減のため現在は無効化中、再有効化時はGPU使用料が発生

---

### 3. コード生成機能の完全実装 ✅ 実装完了

**目的**: 仕様書やユーザー指示からコードを自動生成し、GitHub PRまで自動作成

**実装内容**:
- [x] プロンプト入力インターフェース
- [x] 音声文字起こしからのコード生成トリガー検出
- [x] コード生成ロジック
  - [x] LLMを活用したコード生成（Modal GPUサーバー）
  - [x] 複数ファイル対応
  - [x] ディレクトリ構造生成
  - [x] 依存関係リストの生成
  - [x] セットアップ手順の生成
- [x] GitHub PR自動作成
  - [x] ブランチ作成
  - [x] コミット
  - [x] PR作成
  - [x] PR本文の自動生成
- [ ] コードレビュー連携（未実装）
  - 自動レビューコメント
  - テスト結果の統合

**実装済みの機能**:
✅ **トリガー検出** (`ImportanceDetector`)
  - コード関連キーワードの検出
  - 生成意図の分析
  - 信頼度スコアリング（0.7以上で自動実行）

✅ **コード生成** (`modal_app.py`)
  - LLMを使用した高品質なコード生成
  - 複数ファイル対応（正規表現による抽出）
  - 言語・フレームワークの自動認識
  - 依存関係の抽出
  - セットアップ手順の抽出

✅ **APIエンドポイント** (`processing.ts`)
  - `/api/processing/generate-code`
  - セッションコンテキストの統合
  - 仕様書からの参照

✅ **GitHub連携** (`github.ts`)
  - PR自動作成
  - ブランチ作成
  - ファイルコミット

✅ **MentraOS統合** (`RealWorldAgent.ts`)
  - 音声からの自動検出
  - 言語・フレームワークの抽出
  - 音声フィードバック

✅ **ドキュメント** (`CODE_GENERATION_GUIDE.md`)
  - 完全な使用ガイド
  - API仕様
  - トラブルシューティング

**条件**:
- ✅ ユーザーが明示的に「プログラム生成」「コード生成」を要求した場合のみ実行
- ✅ プロンプト入力での言及、または音声文字起こしでの依頼を検出
- ✅ 自動的には生成しない（ユーザー意図を尊重）

**メリット**:
- 📝 仕様書 → コード自動生成
- 🔄 GitHub PR自動作成
- 🎤 音声からの意図自動検出
- 💻 複数言語・フレームワーク対応
- ⚡ 開発速度の向上

**実装完了日**: 2025-10-24

---

## 📋 実装の進め方

1. **Multi-RAGシステム** （推奨開始）
   - インフラ準備済み
   - コストゼロ
   - 他機能の基盤になる

2. **コード生成機能** （現在実装中）
   - ユーザー体験向上
   - 既存機能の拡張

3. **WhisperX/pyannote再有効化**
   - コスト要検討
   - GPU設定の最適化必要

---

## 🔗 関連ドキュメント

- [進捗状況](../PROGRESS.md)
- [セットアップガイド](../SETUP.md)
- [クイックスタート](../QUICKSTART_JA.md)
- [LLM設定ガイド](./LLM_PROVIDER_CONFIGURATION.md)

