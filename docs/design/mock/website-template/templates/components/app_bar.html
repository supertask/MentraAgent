<!-- App Bar -->
<header class="app-bar">
  <!-- Â∑¶ÂÅ¥: „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº + „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû -->
  <div class="app-bar-left">
    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
    <button class="hamburger-btn" id="hamburgerBtn" aria-label="„É°„Éã„É•„Éº">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <!-- „É≠„Ç¥ -->
    <a href="{{ url_for('dashboard') }}" class="app-bar-logo">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
      </svg>
      <span class="app-bar-logo-text">RealworldAgent</span>
    </a>

    <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
    <div class="project-selector">
      <button class="project-selector-btn" id="projectSelectorBtn">
        <span class="project-name">Project Alpha</span>
        <svg class="dropdown-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>

      <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„É°„Éã„É•„Éº -->
      <div class="project-dropdown" id="projectDropdown">
        <div class="project-dropdown-header">
          <input type="text" class="project-search" placeholder="„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÊ§úÁ¥¢" id="projectSearch">
        </div>
        <div class="project-list" id="projectListContainer">
          {% for project in projects %}
          <div class="project-item {% if loop.first %}active{% endif %}" data-project-id="{{ project.id }}">
            <div class="project-item-icon">{% if loop.first %}‚úì{% else %}üìÅ{% endif %}</div>
            <div class="project-item-content">
              <div class="project-item-name">{{ project.name }}</div>
              <div class="project-item-type">„Éó„É≠„Ç∏„Çß„ÇØ„Éà</div>
            </div>
            <div class="project-item-id">ID: {{ project.id }}</div>
            <button class="project-item-star">‚òÜ</button>
          </div>
          {% endfor %}
        </div>
        <div class="project-dropdown-footer">
          <a href="{{ url_for('projects') }}" class="btn-new-project">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="12" y1="8" x2="12" y2="16"></line>
              <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Êñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà
          </a>
          <a href="{{ url_for('projects') }}" class="btn-project-list">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
            „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Âè≥ÂÅ¥: ÈÄöÁü•„ÉªË®≠ÂÆö„Éª„Ç¢„Ç´„Ç¶„É≥„Éà -->
  <div class="app-bar-right">
    <!-- ÈÄöÁü•„Ç¢„Ç§„Ç≥„É≥ -->
    <button class="icon-btn" id="notificationBtn" aria-label="ÈÄöÁü•">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
      </svg>
      {% if unread_count > 0 %}
      <span class="notification-badge">{{ unread_count }}</span>
      {% endif %}
    </button>

    <!-- ÈÄöÁü•„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
    <div class="notification-dropdown" id="notificationDropdown">
      <div class="notification-header">
        <h3>ÈÄöÁü•</h3>
        <button class="btn-text">„Åô„Åπ„Å¶Ë°®Á§∫</button>
      </div>
      <div class="notification-content">
        {% if notifications %}
          {% for notif in notifications[:5] %}
          <div class="notification-item {% if not notif.read %}unread{% endif %}" data-id="{{ notif.id }}">
            <div class="notification-item-header">
              <div class="notification-item-title">{{ notif.title }}</div>
              <div class="notification-item-time">{{ notif.timestamp|format_relative_time }}</div>
            </div>
            <div class="notification-item-message">{{ notif.message }}</div>
          </div>
          {% endfor %}
        {% else %}
          <p class="notification-empty">ÈÄöÁü•„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>
        {% endif %}
      </div>
    </div>

    <!-- Ë®≠ÂÆö„Ç¢„Ç§„Ç≥„É≥Ôºà3ÁÇπ„É°„Éã„É•„ÉºÔºâ -->
    <button class="icon-btn" id="settingsBtn" aria-label="Ë®≠ÂÆö">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <circle cx="12" cy="5" r="2"></circle>
        <circle cx="12" cy="12" r="2"></circle>
        <circle cx="12" cy="19" r="2"></circle>
      </svg>
    </button>

    <!-- Ë®≠ÂÆö„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
    <div class="settings-dropdown" id="settingsDropdown">
      <a href="{{ url_for('settings') }}" class="dropdown-item">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m5.657-13.657l-4.243 4.243m0 5.657l4.243 4.243M23 12h-6m-6 0H1m18.364-5.657l-4.243 4.243m0 5.657l4.243 4.243"></path>
        </svg>
        <span>Ë®≠ÂÆö</span>
      </a>
    </div>

    <!-- „Ç¢„Ç´„Ç¶„É≥„Éà„Ç¢„Ç§„Ç≥„É≥ -->
    <button class="account-btn" id="accountBtn" aria-label="„Ç¢„Ç´„Ç¶„É≥„Éà">
      <img src="https://via.placeholder.com/32" alt="„Ç¢„Ç´„Ç¶„É≥„Éà" class="account-avatar">
    </button>

    <!-- „Ç¢„Ç´„Ç¶„É≥„Éà„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
    <div class="account-dropdown" id="accountDropdown">
      <div class="account-info">
        <img src="https://via.placeholder.com/48" alt="„Ç¢„Ç´„Ç¶„É≥„Éà" class="account-avatar-large">
        <div class="account-details">
          <div class="account-name">Tasuku TAKAHASHI</div>
          <div class="account-email">lightfox.task@gmail.com</div>
          <a href="#" class="account-privacy-link">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
        </div>
      </div>
      <div class="dropdown-divider"></div>
      <a href="#" class="dropdown-item">
        <span>Google „Ç¢„Ç´„Ç¶„É≥„Éà</span>
      </a>
      <div class="dropdown-divider"></div>
      <a href="#" class="dropdown-item">
        <span>„É≠„Ç∞„Ç¢„Ç¶„Éà</span>
      </a>
    </div>
  </div>
</header>

